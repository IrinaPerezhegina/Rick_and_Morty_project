import{i as G,k as M,r as t,j as e,L as y}from"./vendor-9cKIItrY.js";import{c as R,d as N,G as V,F as D,e as T,g as U,I as b,S as v,f as _,h as O}from"./index-BaOkKJrU.js";import"./loader-DOcktiD5.js";import"./logo-black-8uRHbBAf.js";import"./logo-ChWWtVyl.js";const B={rootMargin:"20px 20px 20px 20px",threshold:1},S=[{id:"status-1",content:"Alive"},{id:"status-2",content:"Dead"},{id:"status-3",content:"Unknown"}],H=[{id:"view-1",content:"Human"},{id:"view-2",content:"Alien"},{id:"view-3",content:"Humanoid"},{id:"view-4",content:"Animal"},{id:"view-5",content:"Robot"}],W=[{id:"gender-1",content:"Female"},{id:"gender-2",content:"Male"},{id:"gender-3",content:"Genderless"},{id:"gender-4",content:"Unknown"}];function E(s){return s==="Alive"||s==="Dead"||s==="Unknown"?s:"Unknown"}const $=2,z=20,w=s=>s.trim()?s.length<$?"Name must contain at least 2 characters.":s.length>z?"Name must contain a max of 30 characters":null:"Name cannot be empty",F=()=>G(),f=M;function P(s,a){const n=t.useRef(null);return t.useCallback(r=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{s(r)},a)},[s,a])}function X(s){const[a,n]=t.useState(!0),[r,c]=t.useState(s.name),[l,m]=t.useState(s.location.name),[d,p]=t.useState(s.status),u=F(),[g,h]=t.useState(null),x=t.useCallback(()=>{n(!1)},[]),j=t.useCallback(()=>{c(s.name),m(s.location.name),p(s.status),h(null),n(!0)},[s.name,s.location,s.status]),i=t.useCallback(o=>{c(o);const L=w(o);h(L)},[]),C=t.useCallback(o=>{m(o)},[]),A=t.useCallback(o=>{p(o)},[]),I=t.useCallback(()=>{const o=w(r);h(o),!o&&(u(R.onEditCharacterCard({id:s.id,name:r,location:l,status:d})),n(!0))},[s.id,u,l,r,d]);return{statusCharacter:t.useMemo(()=>S.find(o=>o.content===s.status),[s.status]),readOnly:a,name:r,location:l,status:d,nameError:g,onEditCharacterCard:I,updateStatusCharacterCard:A,updateLocationCharacterCard:C,updateNameCharacterCard:i,enableEditingMode:x,onCancelEditMode:j}}function Y({triggerRef:s,callback:a}){const n=t.useRef(null);t.useEffect(()=>{const r=s.current;return a&&(n.current=new IntersectionObserver(([c])=>{c.isIntersecting&&a()},B),n.current.observe(r)),()=>{n.current&&r&&n.current.unobserve(r)}},[a,s])}const q={Alive:"green",Dead:"red",Unknown:"orange"},k=s=>{const{status:a="Unknown",classname:n}=s,r=q[a];return r?e.jsx("div",{className:N(r,n)}):null},J=s=>s.filter.status,K=s=>s.filter.gender,Q=s=>s.filter.search,Z=s=>s.filter.species,oe=s=>s.filter,le=s=>s.characters.isLoading&&s.filter.page===1,de=s=>s.characters.isLoading&&s.filter.page>1,ue=t.memo(s=>{const{className:a,character:n}=s;return e.jsxs("div",{className:N("character-profile",a),children:[e.jsx("div",{className:"character-profile__btn",children:e.jsx(V,{})}),n?e.jsxs("div",{className:"character-profile__content",children:[e.jsx("div",{className:"character-profile__content-image",children:e.jsx("img",{src:n.image,alt:"avatar"})}),e.jsxs("div",{className:"character-profile__content-info",children:[e.jsx("h1",{children:n.name}),e.jsx("span",{children:"Information"}),e.jsxs("div",{className:"character-profile__content-table",children:[e.jsxs("div",{className:"character-profile__content-table-gender",children:[e.jsx("strong",{children:"Gender"}),e.jsx("span",{children:n.gender})]}),e.jsxs("div",{className:"character-profile__content-table-status",children:[e.jsx("strong",{children:"Status"}),e.jsx("span",{children:n.status})]}),e.jsxs("div",{className:"character-profile__content-table-species",children:[e.jsx("strong",{children:"Specie"}),e.jsx("span",{children:n.species})]}),e.jsxs("div",{className:"character-profile__content-table-origin",children:[e.jsx("strong",{children:"Origin"}),e.jsx("span",{children:n.origin.name})]}),e.jsxs("div",{className:"character-profile__content-table-type",children:[e.jsx("strong",{children:"Type"}),e.jsx("span",{children:n.type})]}),e.jsxs("div",{className:"character-profile__content-table-location",children:[e.jsx("strong",{children:"Location"}),e.jsx("span",{children:n.location.name})]})]})]})]}):e.jsx("div",{className:"character-profile__content",children:"No data..."})]})}),ee=t.memo(s=>{const{readonly:a,onEdit:n,onCancel:r,onChange:c}=s;return e.jsxs("div",{className:"button-group",children:[e.jsx("button",{onClick:r,children:e.jsx(D,{"aria-label":"Cancel editing",className:"button-group__close"})}),a?e.jsx("button",{onClick:n,children:e.jsx(T,{"aria-label":"Edit",className:"button-group__pensil"})}):e.jsx("button",{onClick:c,children:e.jsx(U,{"aria-label":"Save Editing",className:"button-group__check"})})]})}),he=t.memo(s=>{const{className:a,character:n}=s,{statusCharacter:r,readOnly:c,name:l,location:m,status:d,nameError:p,onEditCharacterCard:u,updateStatusCharacterCard:g,updateLocationCharacterCard:h,updateNameCharacterCard:x,enableEditingMode:j,onCancelEditMode:i}=X(n);return e.jsxs("div",{className:N("character-card",a),children:[e.jsx("div",{className:"character-card__btns",children:e.jsx(ee,{onChange:u,onEdit:j,onCancel:i,readonly:c})}),e.jsx("img",{src:n.image,className:"character-card__image"}),e.jsxs("div",{className:"character-card__description",children:[e.jsx("div",{className:"character-card__description-name",children:c?e.jsx(y,{to:`characters/${n.id}`,children:n.name}):e.jsxs(e.Fragment,{children:[e.jsx(b,{onChange:x,name:"name",readonly:c,view:"underlined",value:l,size:"big"}),e.jsx("span",{className:"character-card__description-error",children:p})]})}),e.jsxs("div",{className:"character-card__description-gender",children:[e.jsx("p",{children:"Gender"}),e.jsx("span",{children:n.gender})]}),e.jsxs("div",{className:"character-card__description-species",children:[e.jsx("p",{children:"Species"}),e.jsx("span",{children:n.species})]}),e.jsxs("div",{className:"character-card__description-location",children:[e.jsx("p",{children:"Location"}),e.jsx(b,{onChange:h,name:"location",readonly:c,view:"underlined",value:m,size:"small"})]}),e.jsxs("div",{className:"character-card__description-status",children:[e.jsx("p",{children:"Status"}),e.jsx("div",{className:"character-card__description-status-wrapper",children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:n.status}),e.jsx(k,{status:E(r?.content)})]}):e.jsx(v,{onChange:g,view:"small",value:d,options:S,SelectOptionContentComponent:C=>e.jsxs(e.Fragment,{children:[C.value,e.jsx(k,{status:E(C.value)})]})})})]})]})]})}),se=1e3,me=t.memo(s=>{const{className:a}=s,n=F(),r=f(K),c=f(J),l=f(Q),m=f(Z),[d,p]=t.useState(l),u=P(i=>n(_.onChangeSearchValue(i)),se),g=t.useCallback(i=>{p(i),u(i)},[u]),h=t.useCallback(i=>{n(_.onChangeStatus(i))},[n]),x=t.useCallback(i=>{n(_.onChangeSpecies(i))},[n]),j=t.useCallback(i=>{n(_.onChangeGender(i))},[n]);return e.jsxs("div",{className:N("filter-panel-widget",a),children:[e.jsx(b,{name:"search",onChange:g,Svg:e.jsx(O,{}),size:"big",view:"bordered",value:d,placeholder:"Filter by name..."}),e.jsx(v,{placeholder:"Species",view:"big",value:m,onChange:x,options:H}),e.jsx(v,{placeholder:"Gender",view:"big",value:r,onChange:j,options:W}),e.jsx(v,{placeholder:"Status",value:c,view:"big",onChange:h,options:S})]})}),pe=t.memo(s=>{const{onScrollEnd:a}=s,n=t.useRef({});return Y({triggerRef:n,callback:a}),e.jsx(e.Fragment,{children:a?e.jsx("div",{className:"trigger",ref:n}):null})});export{ue as C,me as F,pe as I,f as a,le as b,de as c,he as d,oe as g,F as u};
