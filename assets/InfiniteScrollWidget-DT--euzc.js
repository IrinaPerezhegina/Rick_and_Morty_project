import{r as t,j as e,L as y}from"./vendor-CwXzf0uu.js";import{c as j,G as L,I as _,S as x}from"./index-zcIeFVpQ.js";const F={rootMargin:"20px 20px 20px 20px",threshold:1},b=[{id:"status-1",content:"Alive"},{id:"status-2",content:"Dead"},{id:"status-3",content:"Unknown"}],M=[{id:"view-1",content:"Human"},{id:"view-2",content:"Alien"},{id:"view-3",content:"Humanoid"},{id:"view-4",content:"Animal"},{id:"view-5",content:"Robot"}],A=[{id:"gender-1",content:"Female"},{id:"gender-2",content:"Male"},{id:"gender-3",content:"Genderless"},{id:"gender-4",content:"Unknown"}];function N(n){return n==="Alive"||n==="Dead"||n==="Unknown"?n:"Unknown"}function G({character:n,onEditCharacter:s}){const[a,r]=t.useState(!0),[l,i]=t.useState(n.name),[o,h]=t.useState(n.location.name),[d,u]=t.useState(n.status),[v,m]=t.useState(null),p=c=>c.trim()?c.length<2?"Name must contain at least 2 characters.":c.length>20?"Name must contain a max of 30 characters":null:"Name cannot be empty",f=t.useCallback(()=>{r(!1)},[]),C=t.useCallback(()=>{i(n.name),h(n.location.name),u(n.status),m(null),r(!0)},[n.name,n.location,n.status]),w=t.useCallback(c=>{i(c);const R=p(c);m(R)},[]),g=t.useCallback(c=>{h(c)},[]),E=t.useCallback(c=>{u(c)},[]),k=t.useCallback(()=>{const c=p(l);m(c),!c&&(s({id:n.id,name:l,location:o,status:d}),r(!0))},[n.id,o,l,s,d]);return{statusCharacter:t.useMemo(()=>b.find(c=>c.content===n.status),[n.status]),readOnly:a,name:l,location:o,status:d,nameError:v,onEditCharacterCard:k,updateStatusCharacterCard:E,updateLocationCharacterCard:g,updateNameCharacterCard:w,enableEditingMode:f,onCancelEditMode:C}}function z({callback:n,triggerRef:s}){const a=t.useRef(null);t.useEffect(()=>{const r=s.current;return n&&(a.current=new IntersectionObserver(([l])=>{l.isIntersecting&&n()},F),a.current.observe(r)),()=>{a.current&&r&&a.current.unobserve(r)}},[n,s])}const B={Alive:"green",Dead:"red",Unknown:"orange"},S=n=>{const{status:s="Unknown",classname:a}=n,r=B[s];return r?e.jsx("div",{className:j(r,a)}):null},K=t.memo(n=>{const{className:s,character:a}=n;return e.jsxs("div",{className:j("character-profile",s),children:[e.jsx("div",{className:"character-profile__btn",children:e.jsx(L,{})}),a?e.jsxs("div",{className:"character-profile__content",children:[e.jsx("div",{className:"character-profile__content-image",children:e.jsx("img",{src:a.image,alt:"avatar"})}),e.jsxs("div",{className:"character-profile__content-info",children:[e.jsx("h1",{children:a.name}),e.jsx("span",{children:"Information"}),e.jsxs("div",{className:"character-profile__content-table",children:[e.jsxs("div",{className:"character-profile__content-table-gender",children:[e.jsx("strong",{children:"Gender"}),e.jsx("span",{children:a.gender})]}),e.jsxs("div",{className:"character-profile__content-table-status",children:[e.jsx("strong",{children:"Status"}),e.jsx("span",{children:a.status})]}),e.jsxs("div",{className:"character-profile__content-table-species",children:[e.jsx("strong",{children:"Specie"}),e.jsx("span",{children:a.species})]}),e.jsxs("div",{className:"character-profile__content-table-origin",children:[e.jsx("strong",{children:"Origin"}),e.jsx("span",{children:a.origin.name})]}),e.jsxs("div",{className:"character-profile__content-table-type",children:[e.jsx("strong",{children:"Type"}),e.jsx("span",{children:a.type})]}),e.jsxs("div",{className:"character-profile__content-table-location",children:[e.jsx("strong",{children:"Location"}),e.jsx("span",{children:a.location.name})]})]})]})]}):e.jsx("div",{className:"character-profile__content",children:"No data..."})]})}),O=({title:n,titleId:s,...a},r)=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:10,fill:"none",viewBox:"0 0 14 10",ref:r,"aria-labelledby":s,...a},n?t.createElement("title",{id:s},n):null,t.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M13.01.758a1 1 0 0 1 0 1.414l-7.07 7.07a1 1 0 0 1-1.415 0L.99 5.707a1 1 0 1 1 1.415-1.414L5.233 7.12 11.595.758a1 1 0 0 1 1.415 0",clipRule:"evenodd"})),U=t.forwardRef(O),V=({title:n,titleId:s,...a},r)=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:10,height:10,fill:"none",viewBox:"0 0 10 10",ref:r,"aria-labelledby":s,...a},n?t.createElement("title",{id:s},n):null,t.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M9.243.757a1 1 0 0 1 0 1.415L6.414 5l2.829 2.828a1 1 0 1 1-1.415 1.415L5 6.414 2.172 9.243A1 1 0 1 1 .757 7.828L3.586 5 .757 2.172A1 1 0 0 1 2.172.757L5 3.586 7.828.757a1 1 0 0 1 1.415 0",clipRule:"evenodd"})),I=t.forwardRef(V),D=({title:n,titleId:s,...a},r)=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:13,height:13,fill:"none",viewBox:"0 0 13 13",ref:r,"aria-labelledby":s,...a},n?t.createElement("title",{id:s},n):null,t.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M7.83.626c.83-.83 2.176-.83 3.006 0l1.538 1.538c.83.83.83 2.175 0 3.005l-7.498 7.499a.7.7 0 0 1-.501.207H.833a.71.71 0 0 1-.708-.708V8.625c0-.188.075-.368.207-.5zm2.004 1.002a.71.71 0 0 0-1.002 0l-.622.622 2.54 2.54.622-.623a.71.71 0 0 0 0-1.001zm-.086 4.164-2.54-2.54-5.666 5.666v2.54h2.54z",clipRule:"evenodd"})),T=t.forwardRef(D),W=t.memo(n=>{const{readonly:s,onEdit:a,onCancel:r,onChange:l}=n;return e.jsxs("div",{className:"button-group",children:[e.jsx("button",{onClick:r,children:e.jsx(I,{"aria-label":"Отменить редактирование",className:"button-group__close"})}),s?e.jsx("button",{onClick:a,children:e.jsx(T,{"aria-label":"Редактировать",className:"button-group__pensil"})}):e.jsx("button",{onClick:l,children:e.jsx(U,{"aria-label":"Сохранить редактирование",className:"button-group__check"})})]})}),Q=t.memo(n=>{const{className:s,character:a,onEditCharacter:r}=n,{statusCharacter:l,readOnly:i,name:o,location:h,status:d,nameError:u,onEditCharacterCard:v,updateStatusCharacterCard:m,updateLocationCharacterCard:p,updateNameCharacterCard:f,enableEditingMode:C,onCancelEditMode:w}=G({character:a,onEditCharacter:r});return e.jsxs("div",{className:j("character-card",s),children:[e.jsx("div",{className:"character-card__btns",children:e.jsx(W,{onChange:v,onEdit:C,onCancel:w,readonly:i})}),e.jsx("img",{src:a.image,className:"character-card__image"}),e.jsxs("div",{className:"character-card__description",children:[e.jsx("div",{className:"character-card__description-name",children:i?e.jsx(y,{to:`characters/${a.id}`,children:a.name}):e.jsxs(e.Fragment,{children:[e.jsx(_,{onChange:f,name:"name",readonly:i,view:"form",value:o,size:"big"}),e.jsx("span",{className:"character-card__description-error",children:u})]})}),e.jsxs("div",{className:"character-card__description-gender",children:[e.jsx("p",{children:"Gender"}),e.jsx("span",{children:a.gender})]}),e.jsxs("div",{className:"character-card__description-species",children:[e.jsx("p",{children:"Species"}),e.jsx("span",{children:a.species})]}),e.jsxs("div",{className:"character-card__description-location",children:[e.jsx("p",{children:"Location"}),e.jsx(_,{onChange:p,name:"location",readonly:i,view:"form",value:h,size:"small"})]}),e.jsxs("div",{className:"character-card__description-status",children:[e.jsx("p",{children:"Status"}),e.jsx("div",{className:"character-card__description-status-wrapper",children:i?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:a.status}),e.jsx(S,{status:N(l?.content)})]}):e.jsx(x,{onChange:m,view:"small",value:d,options:b,SelectOptionContentComponent:g=>e.jsxs(e.Fragment,{children:[g.value,e.jsx(S,{status:N(g.value)})]})})})]})]})]})}),$=({title:n,titleId:s,...a},r)=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",ref:r,"aria-labelledby":s,...a},n?t.createElement("title",{id:s},n):null,t.createElement("path",{fill:"#000",fillOpacity:.54,d:"M15.5 15h-.79l-.28-.27A6.47 6.47 0 0 0 16 10.5 6.5 6.5 0 1 0 9.5 17c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 20zm-6 0C7.01 15 5 12.99 5 10.5S7.01 6 9.5 6 14 8.01 14 10.5 11.99 15 9.5 15"})),H=t.forwardRef($),X=t.memo(n=>{const{searchValue:s,speciesValue:a,genderValue:r,statusValue:l,onChangeGender:i,onChangeSpecies:o,onChangeSearch:h,onChangeStatus:d,className:u}=n;return e.jsxs("div",{className:j("filter-panel-widget",u),children:[e.jsx(_,{name:"search",isControlled:!1,onChange:h,Svg:e.jsx(H,{}),size:"big",view:"filter",value:s,placeholder:"Filter by name..."}),e.jsx(x,{placeholder:"Species",view:"big",value:a,onChange:o,options:M}),e.jsx(x,{placeholder:"Gender",view:"big",value:r,onChange:i,options:A}),e.jsx(x,{placeholder:"Status",value:l,view:"big",onChange:d,options:b})]})}),Y=t.memo(n=>{const{onScrollEnd:s}=n,a=t.useRef({});return z({triggerRef:a,callback:s}),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"trigger",ref:a}):null})});export{K as C,X as F,Y as I,Q as a};
